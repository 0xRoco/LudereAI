<Window x:Class="LudereAI.WPF.Views.SetupView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:local="clr-namespace:LudereAI.WPF.Views"
        xmlns:viewModels="clr-namespace:LudereAI.WPF.ViewModels"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance viewModels:SetupViewModel}"
        Title="Welcome to LudereAI - First-Time Setup"
        Height="600" Width="800"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize"
        Style="{StaticResource MaterialDesignWindow}"
        Background="{DynamicResource MaterialDesignPaper}"
        Foreground="{DynamicResource MaterialDesignBody}"
        FontFamily="{DynamicResource MaterialDesignFont}">

    <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Margin="0 0 0 16" >
                <TextBlock Text="LudereAI Setup"
                           Style="{StaticResource MaterialDesignHeadline5TextBlock}"
                           HorizontalAlignment="Center" />
                <TextBlock Text="Get Started With Your Personal Context-Aware AI-Powered Gaming Companion"
                           Style="{StaticResource MaterialDesignSubtitle1TextBlock}"
                           HorizontalAlignment="Center"
                           Margin="0 8 0 0" />
            </StackPanel>

            <StackPanel Grid.Row="1" Margin="32" Orientation="Horizontal">
                
                <materialDesign:Card Padding="16" Margin="24" Width="300" Height="300"
                                     Background="{DynamicResource MaterialDesignPaper}">
                    <StackPanel>
                        <materialDesign:PackIcon Kind="KeyChainVariant"
                                                 Width="50"
                                                 Height="50"
                                                 HorizontalAlignment="Center" />
                        
                        <TextBlock Text="AI Provider" HorizontalAlignment="Center" 
                                   FontSize="16"
                                   Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                                   Margin="5" />
                        
                        <ComboBox ItemsSource="{Binding AIProviderTemplates}"
                                  SelectedItem="{Binding SelectedAIProviderTemplate}"
                                  DisplayMemberPath="ProviderType"
                                  materialDesign:HintAssist.Hint="Select AI Provider"
                                  Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                                  Margin="5"/>

                        <PasswordBox materialDesign:HintAssist.Hint="API Key"
                                     Style="{StaticResource MaterialDesignFloatingHintPasswordBox}"
                                     materialDesign:PasswordBoxAssist.Password="{Binding AppSettings.General.AIProvider.ApiKey, UpdateSourceTrigger=PropertyChanged}" 
                                     Margin="5"/>
                                
                        <TextBox Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                 materialDesign:HintAssist.Hint="Model Name"
                                 Text="{Binding AppSettings.General.AIProvider.Model, UpdateSourceTrigger=PropertyChanged}"
                                 Margin="5"/>

                        <TextBox Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                 materialDesign:HintAssist.Hint="Custom API Endpoint URL"
                                 Text="{Binding AppSettings.General.AIProvider.BaseUrl, UpdateSourceTrigger=PropertyChanged}"
                                 Visibility="{Binding AppSettings.General.AIProvider.IsCustom, Converter={StaticResource BooleanToVisibilityConverter}}" 
                                 Margin="5"/>
                    </StackPanel>
                </materialDesign:Card>

                <materialDesign:Card Margin="24" Padding="16" Width="300" Height="300"
                                     VerticalAlignment="Center"
                                     Background="{DynamicResource MaterialDesignPaper}">
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <materialDesign:PackIcon Kind="TextToSpeech"
                                                 Width="50"
                                                 Height="50"
                                                 HorizontalAlignment="Center" />
                        <TextBlock Text="Text-to-Speech (TTS) Provider" HorizontalAlignment="Center" 
                                   FontSize="16"
                                   Style="{StaticResource MaterialDesignHeadline6TextBlock}" 
                                   Margin="0,0,0,10"/>
                        <ComboBox ItemsSource="{Binding TTSProviders}"
                                  SelectedItem="{Binding SelectedTTSProvider}"
                                  materialDesign:HintAssist.Hint="Select TTS Provider"
                                  Style="{StaticResource MaterialDesignFloatingHintComboBox}"/>
                            
                        <PasswordBox Margin="0,15,0,0"
                                     materialDesign:HintAssist.Hint="TTS API Key (e.g., for ElevenLabs)"
                                     materialDesign:PasswordBoxAssist.Password="{Binding AppSettings.General.TTSApiKey, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            
                        <TextBox Margin="0,15,0,0"
                                 materialDesign:HintAssist.Hint="Custom TTS Endpoint URL (e.g., for Piper)"
                                 Text="{Binding AppSettings.General.TTSCustomEndpoint, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                 Visibility="{Binding IsCustomTTSProvider, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    </StackPanel>
                </materialDesign:Card>
            </StackPanel>
            
            <Button Grid.Row="2" Content="Save and Continue"
                    Command="{Binding SaveAndContinueCommand}"
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Width="200"
                    materialDesign:ButtonAssist.CornerRadius="8"
                    HorizontalAlignment="Center"
                    Margin="15" />

            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center">
                <materialDesign:PackIcon Kind="ShieldCheck"
                                         Width="16" Height="16"
                                         Margin="0 0 8 0"
                                         VerticalAlignment="Center" />
                <TextBlock Text="Your API key is securely stored on this computer."
                           Style="{StaticResource MaterialDesignCaptionTextBlock}" />
            </StackPanel>
        </Grid>

    </Grid>
</Window>