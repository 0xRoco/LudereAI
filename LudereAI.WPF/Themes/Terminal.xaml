<?xml version="1.0" encoding="utf-8"?>

<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- Fonts & Colors -->
    <FontFamily x:Key="Term.Font.Mono">JetBrains Mono, Consolas, Monospace</FontFamily>

    <Color x:Key="Term.Color.Background">#0A0B0C</Color>
    <Color x:Key="Term.Color.Panel">#101214</Color>
    <Color x:Key="Term.Color.PanelAlt">#141619</Color>
    <Color x:Key="Term.Color.Border">#1E2124</Color>
    <Color x:Key="Term.Color.BorderSoft">#15181A</Color>
    <Color x:Key="Term.Color.TextPrimary">#E8E9EA</Color>
    <Color x:Key="Term.Color.TextMuted">#6A6F74</Color>
    <Color x:Key="Term.Color.Accent">#C7B15A</Color>
    <Color x:Key="Term.Color.AccentActive">#2ECC71</Color>
    <Color x:Key="Term.Color.AccentWarn">#F8E247</Color>
    <Color x:Key="Term.Color.AccentError">#FF4747</Color>

    <!-- Brushes -->
    <SolidColorBrush x:Key="Term.Brush.Background" Color="{StaticResource Term.Color.Background}" />
    <SolidColorBrush x:Key="Term.Brush.Panel" Color="{StaticResource Term.Color.Panel}" />
    <SolidColorBrush x:Key="Term.Brush.PanelAlt" Color="{StaticResource Term.Color.PanelAlt}" />
    <SolidColorBrush x:Key="Term.Brush.Border" Color="{StaticResource Term.Color.Border}" />
    <SolidColorBrush x:Key="Term.Brush.BorderSoft" Color="{StaticResource Term.Color.BorderSoft}" />
    <SolidColorBrush x:Key="Term.Brush.TextPrimary" Color="{StaticResource Term.Color.TextPrimary}" />
    <SolidColorBrush x:Key="Term.Brush.TextMuted" Color="{StaticResource Term.Color.TextMuted}" />
    <SolidColorBrush x:Key="Term.Brush.Accent" Color="{StaticResource Term.Color.Accent}" />
    <SolidColorBrush x:Key="Term.Brush.AccentActive" Color="{StaticResource Term.Color.AccentActive}" />
    <SolidColorBrush x:Key="Term.Brush.AccentWarn" Color="{StaticResource Term.Color.AccentWarn}" />
    <SolidColorBrush x:Key="Term.Brush.AccentError" Color="{StaticResource Term.Color.AccentError}" />

    <!-- Window -->
    <Style x:Key="TermWindow" TargetType="Window">
        <Setter Property="Background" Value="{StaticResource Term.Brush.Background}" />
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Border}" />
        <Setter Property="UseLayoutRounding" Value="True" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
    </Style>

    <!-- Typography -->
    <Style x:Key="TermHeaderText" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="13" />
        <Setter Property="FontWeight" Value="Bold" />
    </Style>

    <Style x:Key="TermHeaderMuted" TargetType="TextBlock" BasedOn="{StaticResource TermHeaderText}">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextMuted}" />
        <Setter Property="FontWeight" Value="Normal" />
    </Style>

    <Style x:Key="TermSectionTitle" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.Accent}" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="FontWeight" Value="Bold" />
        <Setter Property="Margin" Value="0,0,0,10" />
    </Style>

    <Style x:Key="TermSubTitle" TargetType="TextBlock" BasedOn="{StaticResource TermSectionTitle}">
        <Setter Property="Margin" Value="0,0,0,6" />
    </Style>

    <Style x:Key="TermLabel" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextMuted}" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="Margin" Value="0,6,0,0" />
    </Style>

    <Style x:Key="TermValue" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
    </Style>

    <Style x:Key="TermHint" TargetType="TextBlock" BasedOn="{StaticResource TermLabel}">
        <Setter Property="TextWrapping" Value="Wrap" />
    </Style>

    <Style x:Key="TermFeedItem" TargetType="TextBlock" BasedOn="{StaticResource TermLabel}">
        <Setter Property="Margin" Value="0,2,0,0" />
    </Style>

    <Style x:Key="TermTimestamp" TargetType="TextBlock" BasedOn="{StaticResource TermLabel}">
        <Setter Property="FontSize" Value="10" />
        <Setter Property="Margin" Value="2,0,2,0" />
    </Style>

    <!-- Header -->
    <Style x:Key="TermHeaderStrip" TargetType="Border">
        <Setter Property="Background" Value="{StaticResource Term.Brush.Panel}" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Accent}" />
        <Setter Property="BorderThickness" Value="0,0,0,1.5" />
        <Setter Property="Padding" Value="14,8,14,8" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
    </Style>

    <!-- Surfaces -->
    <Style x:Key="TermPanel" TargetType="Border">
        <Setter Property="Background" Value="{StaticResource Term.Brush.Panel}" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Border}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
    </Style>

    <Style x:Key="TermSidebarLeft" TargetType="Border" BasedOn="{StaticResource TermPanel}">
        <Setter Property="BorderThickness" Value="0,0,1,0" />
    </Style>

    <Style x:Key="TermSidebarRight" TargetType="Border" BasedOn="{StaticResource TermPanel}">
        <Setter Property="BorderThickness" Value="1,0,0,0" />
    </Style>

    <Style x:Key="TermSubPanel" TargetType="Border" BasedOn="{StaticResource TermPanel}">
        <Setter Property="Background" Value="{StaticResource Term.Brush.PanelAlt}" />
        <Setter Property="Padding" Value="10" />
        <Setter Property="Margin" Value="0,12,0,0" />
    </Style>

    <Style x:Key="TermCard" TargetType="Border" BasedOn="{StaticResource TermSubPanel}">
        <Setter Property="CornerRadius" Value="6" />
        <Setter Property="Padding" Value="16" />
        <Setter Property="Margin" Value="0,0,0,16" />
    </Style>

    <Style x:Key="TermCardSubtle" TargetType="Border" BasedOn="{StaticResource TermSubPanel}">
        <Setter Property="Background" Value="{StaticResource Term.Brush.Panel}" />
        <Setter Property="CornerRadius" Value="4" />
        <Setter Property="Padding" Value="12" />
        <Setter Property="Margin" Value="0,0,0,12" />
    </Style>

    <Style x:Key="TermListItem" TargetType="Border">
        <Setter Property="Background" Value="{StaticResource Term.Brush.PanelAlt}" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Border}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="10" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
    </Style>

    <Style x:Key="TermInputPanel" TargetType="Border" BasedOn="{StaticResource TermPanel}">
        <Setter Property="BorderThickness" Value="1,1,1,0" />
    </Style>

    <!-- ScrollViewer -->
    <Style x:Key="TermScrollViewer" TargetType="ScrollViewer">
        <Setter Property="VerticalScrollBarVisibility" Value="Auto" />
        <Setter Property="HorizontalScrollBarVisibility" Value="Disabled" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Padding" Value="0" />
    </Style>

    <!-- Inputs -->
    <Style x:Key="TermInput" TargetType="TextBox">
        <Setter Property="Background" Value="{StaticResource Term.Brush.PanelAlt}" />
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Border}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="Padding" Value="10" />
        <Setter Property="CaretBrush" Value="{StaticResource Term.Brush.AccentActive}" />
        <Setter Property="AcceptsReturn" Value="True" />
        <Setter Property="VerticalScrollBarVisibility" Value="Auto" />
        <Setter Property="SpellCheck.IsEnabled" Value="False" />
        <Style.Triggers>
            <Trigger Property="IsKeyboardFocused" Value="True">
                <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Accent}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="TermPasswordBox" TargetType="PasswordBox">
        <Setter Property="Background" Value="{StaticResource Term.Brush.PanelAlt}" />
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Border}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="Padding" Value="10" />
        <Setter Property="CaretBrush" Value="{StaticResource Term.Brush.AccentActive}" />
    </Style>

    <Style x:Key="TermComboBoxItem" TargetType="ComboBoxItem">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Padding" Value="8,4" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ComboBoxItem">
                    <Border x:Name="Root"
                            Background="{TemplateBinding Background}">
                        <ContentPresenter Margin="0"
                                          HorizontalAlignment="Left"
                                          VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="#16191C" />
                        </Trigger>

                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="#2A2E32" />
                            <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
                        </Trigger>

                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="True" />
                                <Condition Property="IsMouseOver" Value="True" />
                            </MultiTrigger.Conditions>
                            <Setter TargetName="Root" Property="Background" Value="#1B1F22" />
                        </MultiTrigger>

                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Root" Property="Opacity" Value="0.55" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <Style x:Key="TermComboBox" TargetType="ComboBox">
        <Setter Property="Background" Value="{StaticResource Term.Brush.PanelAlt}" />
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Accent}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="Padding" Value="4" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="ItemContainerStyle" Value="{StaticResource TermComboBoxItem}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ComboBox">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="26" />
                        </Grid.ColumnDefinitions>

                        <!-- Value area -->
                        <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter Margin="2,0,2,0"
                                              Content="{TemplateBinding SelectionBoxItem}"
                                              ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                              VerticalAlignment="Center"
                                              HorizontalAlignment="Left" />
                        </Border>

                        <!-- Arrow button -->
                        <ToggleButton x:Name="DropDownToggle"
                                      Grid.Column="1"
                                      Focusable="False"
                                      Background="{TemplateBinding Background}"
                                      BorderBrush="{TemplateBinding BorderBrush}"
                                      BorderThickness="0"
                                      Foreground="{StaticResource Term.Brush.TextMuted}"
                                      IsChecked="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                      ClickMode="Press"
                                      FocusVisualStyle="{x:Null}">
                            <ToggleButton.Template>
                                <ControlTemplate TargetType="ToggleButton">
                                    <Border x:Name="ArrowHost"
                                            Background="{TemplateBinding Background}"
                                            BorderBrush="{StaticResource Term.Brush.Border}"
                                            BorderThickness="1,0,0,0">
                                        <Path x:Name="ArrowPath"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Stroke="{TemplateBinding Foreground}"
                                              StrokeThickness="1.2"
                                              Data="M 0 0 L 5 5 L 10 0" />
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="ArrowHost" Property="Background" Value="#16191C" />
                                            <Setter TargetName="ArrowPath" Property="Stroke"
                                                    Value="{StaticResource Term.Brush.AccentActive}" />
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="ArrowHost" Property="Background" Value="#1B1F22" />
                                        </Trigger>
                                        <Trigger Property="IsChecked" Value="True">
                                            <Setter TargetName="ArrowHost" Property="Background" Value="#181B1E" />
                                            <Setter TargetName="ArrowPath" Property="Stroke"
                                                    Value="{StaticResource Term.Brush.AccentActive}" />
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter TargetName="ArrowHost" Property="Opacity" Value="0.55" />
                                            <Setter TargetName="ArrowPath" Property="Opacity" Value="0.55" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>

                        <!-- Popup -->
                        <Popup x:Name="PART_Popup"
                               Grid.Column="1"
                               Placement="Bottom"
                               IsOpen="{TemplateBinding IsDropDownOpen}"
                               AllowsTransparency="True"
                               Focusable="False"
                               PopupAnimation="Fade">
                            <Border Background="{StaticResource Term.Brush.Panel}"
                                    BorderBrush="{StaticResource Term.Brush.Border}"
                                    BorderThickness="1"
                                    Margin="0,2,0,0"
                                    SnapsToDevicePixels="True">
                                <ScrollViewer CanContentScroll="True"
                                              Style="{StaticResource TermScrollViewer}">
                                    <ItemsPresenter />
                                </ScrollViewer>
                            </Border>
                        </Popup>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter TargetName="Border" Property="BorderBrush"
                                    Value="{StaticResource Term.Brush.Accent}" />
                        </Trigger>
                        <Trigger Property="IsDropDownOpen" Value="True">
                            <Setter TargetName="Border" Property="BorderBrush"
                                    Value="{StaticResource Term.Brush.AccentActive}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextMuted}" />
                            <Setter TargetName="Border" Property="Opacity" Value="0.55" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Toggles & Checks -->
    <Style x:Key="TermSwitchToggle" TargetType="ToggleButton">
        <Setter Property="Focusable" Value="False" />
        <Setter Property="Width" Value="44" />
        <Setter Property="Height" Value="22" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToggleButton">
                    <Grid>
                        <Border x:Name="Track"
                                CornerRadius="11"
                                Background="#202326"
                                BorderBrush="{StaticResource Term.Brush.Border}"
                                BorderThickness="1" />
                        <Border x:Name="Thumb"
                                Width="18" Height="18"
                                CornerRadius="9"
                                Background="{StaticResource Term.Brush.TextPrimary}"
                                Margin="2,2,24,2"
                                HorizontalAlignment="Left" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="Track" Property="Background" Value="#1F3A2A" />
                            <Setter TargetName="Track" Property="BorderBrush"
                                    Value="{StaticResource Term.Brush.AccentActive}" />
                            <Setter TargetName="Thumb" Property="Background"
                                    Value="{StaticResource Term.Brush.AccentActive}" />
                            <Setter TargetName="Thumb" Property="Margin" Value="24,2,2,2" />
                            <Setter TargetName="Thumb" Property="HorizontalAlignment" Value="Right" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Track" Property="BorderBrush"
                                    Value="{StaticResource Term.Brush.Accent}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Track" Property="Opacity" Value="0.5" />
                            <Setter TargetName="Thumb" Property="Opacity" Value="0.5" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="TermCheckBox" TargetType="CheckBox">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextMuted}" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="Margin" Value="0,0,0,0" />
    </Style>

    <!-- Navigation -->
    <Style x:Key="TermTabControl" TargetType="TabControl">
        <Setter Property="Background" Value="{StaticResource Term.Brush.Panel}" />
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Border}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="TabStripPlacement" Value="Top" />
    </Style>

    <Style x:Key="TermTabItem" TargetType="TabItem">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="Padding" Value="12,6" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TabItem">
                    <Border x:Name="Bd"
                            Background="{StaticResource Term.Brush.Panel}"
                            BorderBrush="{StaticResource Term.Brush.Border}"
                            BorderThickness="0,0,0,1"
                            SnapsToDevicePixels="True">
                        <ContentPresenter x:Name="HeaderContent"
                                          ContentSource="Header"
                                          RecognizesAccessKey="True"
                                          Margin="8,4"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="{StaticResource Term.Brush.PanelAlt}" />
                            <Setter TargetName="Bd" Property="BorderBrush" Value="{StaticResource Term.Brush.Accent}" />
                            <Setter TargetName="Bd" Property="BorderThickness" Value="0,0,0,2" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="#15181A" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextMuted}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="TermExpander" TargetType="Expander">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Expander">
                    <Border x:Name="Outer"
                            Background="{StaticResource Term.Brush.PanelAlt}"
                            BorderBrush="{StaticResource Term.Brush.Border}"
                            BorderThickness="1"
                            SnapsToDevicePixels="True">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <ToggleButton x:Name="HeaderToggle"
                                          Grid.Row="0"
                                          Content="{TemplateBinding Header}"
                                          Background="{StaticResource Term.Brush.PanelAlt}"
                                          BorderThickness="0"
                                          Focusable="False"
                                          IsChecked="{Binding IsExpanded, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                          OverridesDefaultStyle="True">
                                <ToggleButton.Template>
                                    <ControlTemplate TargetType="ToggleButton">
                                        <Border x:Name="HeaderBg"
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{StaticResource Term.Brush.BorderSoft}"
                                                BorderThickness="0,0,0,1"
                                                Padding="12,8,12,8"
                                                SnapsToDevicePixels="True">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="8" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>

                                                <Path x:Name="Arrow"
                                                      Grid.Column="0"
                                                      Stroke="{StaticResource Term.Brush.Accent}"
                                                      StrokeThickness="1.4"
                                                      Data="M 0 0 L 6 6 L 12 0"
                                                      RenderTransformOrigin="0.5,0.5">
                                                    <Path.RenderTransform>
                                                        <RotateTransform Angle="0" />
                                                    </Path.RenderTransform>
                                                </Path>

                                                <ContentPresenter Grid.Column="2"
                                                                  VerticalAlignment="Center"
                                                                  HorizontalAlignment="Center"
                                                                  RecognizesAccessKey="True"
                                                                  Margin="0"
                                                                  TextElement.Foreground="{StaticResource Term.Brush.Accent}"
                                                                  TextElement.FontWeight="Bold" />
                                            </Grid>
                                        </Border>

                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="HeaderBg" Property="Background" Value="#16191C" />
                                                <Setter TargetName="Arrow" Property="Stroke"
                                                        Value="{StaticResource Term.Brush.AccentActive}" />
                                            </Trigger>
                                            <Trigger Property="IsChecked" Value="True">
                                                <Setter TargetName="HeaderBg" Property="Background" Value="#181B1E" />
                                                <Setter TargetName="HeaderBg" Property="BorderBrush"
                                                        Value="{StaticResource Term.Brush.AccentActive}" />
                                                <Setter TargetName="Arrow" Property="RenderTransform">
                                                    <Setter.Value>
                                                        <RotateTransform Angle="180" />
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                            <Trigger Property="IsEnabled" Value="False">
                                                <Setter Property="Opacity" Value="0.55" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </ToggleButton.Template>
                            </ToggleButton>

                            <Border x:Name="ContentHost"
                                    Grid.Row="1"
                                    Background="{StaticResource Term.Brush.PanelAlt}"
                                    Padding="10"
                                    Visibility="Collapsed">
                                <ContentPresenter />
                            </Border>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger SourceName="HeaderToggle" Property="IsChecked" Value="True">
                            <Setter TargetName="ContentHost" Property="Visibility" Value="Visible" />
                            <Setter TargetName="Outer" Property="BorderBrush"
                                    Value="{StaticResource Term.Brush.AccentActive}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Buttons -->
    <Style x:Key="TermButtonPrimary" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource Term.Brush.Accent}" />
        <Setter Property="Foreground" Value="#101010" />
        <Setter Property="FontWeight" Value="Bold" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="Padding" Value="6 4" />
        <Setter Property="Height" Value="24" />
        <Setter Property="MinWidth" Value="120" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Accent}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="3"
                            Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#D6C068" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="#AA8E3E" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.35" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="TermButtonSecondary" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource Term.Brush.PanelAlt}" />
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="FontWeight" Value="Bold" />
        <Setter Property="Padding" Value="6 4" />
        <Setter Property="Height" Value="24" />
        <Setter Property="MinWidth" Value="120" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Border}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="3" Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#16191C" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="#101214" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.45" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="TermButtonTertiary" TargetType="Button">
        <Setter Property="Background" Value="{x:Null}" />
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="FontWeight" Value="Bold" />
        <Setter Property="Padding" Value="6 4" />
        <Setter Property="MinWidth" Value="120" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.BorderSoft}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="3" Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#16191C" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="#1B1F22" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.45" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="TermButtonOutline" TargetType="Button">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Accent}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="Padding" Value="10 6" />
        <Setter Property="MinWidth" Value="140" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="3"
                            Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#16191C" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="#1B1F22" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.45" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="TermButtonSuccess" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource Term.Brush.AccentActive}" />
        <Setter Property="Foreground" Value="#101010" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="FontWeight" Value="Bold" />
        <Setter Property="Padding" Value="6 4" />
        <Setter Property="MinWidth" Value="120" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.AccentActive}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="3" Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#3DD47A" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="#1E9E51" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.45" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="TermButtonWarning" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource Term.Brush.AccentWarn}" />
        <Setter Property="Foreground" Value="#101010" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="FontWeight" Value="Bold" />
        <Setter Property="Padding" Value="6 4" />
        <Setter Property="MinWidth" Value="120" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.AccentWarn}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="3" Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#FAE86E" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="#BCA930" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.45" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="TermButtonDanger" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource Term.Brush.AccentError}" />
        <Setter Property="Foreground" Value="#101010" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="FontWeight" Value="Bold" />
        <Setter Property="Padding" Value="6 4" />
        <Setter Property="MinWidth" Value="120" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.AccentError}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="3" Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#FF5959" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="#D82C2C" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.45" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="TermActionButton" TargetType="Button" BasedOn="{StaticResource TermButtonPrimary}">
        <Setter Property="Height" Value="54" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="Padding" Value="12 8" />
        <Setter Property="MinWidth" Value="100" />
    </Style>

    <Style x:Key="TermButtonText" TargetType="Button">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.Accent}" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="FontWeight" Value="Bold" />
        <Setter Property="Padding" Value="4 2" />
        <Setter Property="BorderBrush" Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Foreground" Value="#D6C068" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Foreground" Value="#AA8E3E" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.45" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="TermButtonLink" TargetType="Button" BasedOn="{StaticResource TermButtonText}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            Padding="{TemplateBinding Padding}">
                        <TextBlock x:Name="LinkText"
                                   Text="{TemplateBinding Content}"
                                   Foreground="{TemplateBinding Foreground}"
                                   FontFamily="{TemplateBinding FontFamily}"
                                   FontSize="{TemplateBinding FontSize}"
                                   FontWeight="{TemplateBinding FontWeight}" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="LinkText" Property="Foreground" Value="#D6C068" />
                            <Setter TargetName="LinkText" Property="TextDecorations" Value="Underline" />
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="LinkText" Property="Foreground" Value="#AA8E3E" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="LinkText" Property="Opacity" Value="0.45" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="TermIconButton" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource Term.Brush.PanelAlt}" />
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="Padding" Value="6" />
        <Setter Property="Width" Value="32" />
        <Setter Property="Height" Value="32" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Border}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="3"
                            Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#16191C" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="#101214" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.45" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- Messages -->
    <Style x:Key="TermMessageBubble" TargetType="Border">
        <Setter Property="Background" Value="{StaticResource Term.Brush.PanelAlt}" />
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Border}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="CornerRadius" Value="4" />
        <Setter Property="Padding" Value="10 8" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding Role}" Value="User">
                <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.AccentActive}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Role}" Value="Assistant">
                <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.Accent}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Role}" Value="System">
                <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.AccentError}" />
                <Setter Property="Background" Value="#181214" />
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="TermRoleLabel" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextMuted}" />
        <Setter Property="FontSize" Value="10" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="FontWeight" Value="Bold" />
        <Setter Property="Margin" Value="0,0,0,4" />
    </Style>

    <Style x:Key="TermMessageText" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextPrimary}" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
        <Setter Property="TextWrapping" Value="Wrap" />
    </Style>

    <Style x:Key="TermProcessingBubble" TargetType="Border" BasedOn="{StaticResource TermMessageBubble}">
        <Setter Property="BorderBrush" Value="{StaticResource Term.Brush.AccentWarn}" />
        <Setter Property="Background" Value="#17191B" />
        <Setter Property="Padding" Value="8 6" />
    </Style>

    <Style x:Key="TermProcessingText" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{StaticResource Term.Brush.TextMuted}" />
        <Setter Property="FontSize" Value="11" />
        <Setter Property="FontFamily" Value="{StaticResource Term.Font.Mono}" />
    </Style>

</ResourceDictionary>